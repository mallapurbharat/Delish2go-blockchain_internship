<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Delivery Person Dashboard</title>

    <!-- css  -->
    <link rel="stylesheet" href="/deliveryPersonnel/css/orders_d.css" />

    <!-- UIkit CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/uikit@3.5.5/dist/css/uikit.min.css"
    />

    <link rel="shortcut icon" href="fork.png" type="image/x-icon" />

    <!-- google fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,800;1,600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald:wght@600&family=Zilla+Slab:ital,wght@0,400;0,500;1,300&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Catamaran:wght@500&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <script
      src="https://kit.fontawesome.com/27f6149baa.js"
      crossorigin="anonymous"
    ></script>

    <!-- UIkit JS -->
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.5.5/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.5.5/dist/js/uikit-icons.min.js"></script>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-168821880-2"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-168821880-2');
    </script>

  </head>
  <body>
    <div id="navbar">
      <div
        uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky; bottom: #transparent-sticky-navbar"
      >
        <div class="uk-position-relative">
          <div class="uk-position-top">
            <nav
              style="background-color: #3399ff"
              class="uk-navbar-container"
              uk-navbar
            >
              <div class="uk-navbar-item">
                <h1 class="logoColor">
                  <i class="fas fa-utensils"></i> Delivery Person Dashboard
                </h1>
              </div>
              <div class="uk-navbar-right">
                <div class="uk-navbar-item">
                  <a class="linkClass" href="/deliveryPersonnel/">Orders</a>
                </div>

                <div class="uk-navbar-item">
                  <a class="linkClass" href="/deliveryPersonnel/pastOrders/">Past orders</a>
                </div>

                <div class="uk-navbar-item">
                  <a class="linkClass" id="logout-btn">Logout</a>
                </div>
                <div class="uk-navbar-item space"></div>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </div>


    <% if(deliveryPersonnel.isAssigned) { %>
    <div class="orders">
      <div
        class="uk-grid-column-small uk-grid-row-large uk-child-width-1-3@s uk-text-center"
        uk-grid
      >
        <div>
          <div class="cards">
            <h2 class="cardtitle" orderId="<%= orders[0]._id %>">Order-ID: <%= orders[0]._id %></h2>
            <div class="ordcontent">
              <table>
                <tr>
                  <td class="leftc">Restaurant Details</td>
                  <td class="rightc">
                    <%= orders[0].restaurant_name %> , <%= orders[0].restaurant_address %>,
                    phone :<%= orders[0].restaurant_phone %>.
                  </td>
                </tr>
                <tr>
                  <td class="leftc">Customer Details</td>
                  <td class="rightc">
                    <%= orders[0].name %> , <%= orders[0].address %>, phone :<%= orders[0].phone %>.
                  </td>
                </tr>
                <tr>
                  <td class="leftc">Food Quantity</td>
                  <td class="rightc"><%= orders[0].totQunt %></td>
                </tr>
              </table>
            </div>
            <button class="cardbtn2" id="outForDelivery-btn" type="button" <% if(orders[0].status==ORDER_STATUS.OUT_FOR_DELIVERY) { %> style="background-color: grey;" disabled <%}%>>Out For Delivery</button>
            <% if(orders[0].status==ORDER_STATUS.OUT_FOR_DELIVERY) { %> 
              <!-- <button class="cardbtn" type="button">Delivered</button> -->
            <%}%>
          </div>
        </div>
        <div class="content">
          <h1>"Drive safe"</h1>
          <i class="fas fa-motorcycle fa-4x contenti"></i>
        </div>
      </div>
    </div>
 <% } else { %>
    <!-- ------------------------------------------------------------- -->

    <div class="orders">
      <div
        class="uk-grid-column-small uk-grid-row-large uk-child-width-1-3@s uk-text-center"
        uk-grid
      >

      <% for(let i=0; i< orders.length; i++) { %>
        <div>
          <div class="cards">
            <h2 class="cardtitle" orderId="<%= orders[i]._id %>">Order-ID: <%= orders[i]._id %></h2>
            <div class="ordcontent">
              <table>
                <tr>
                  <td class="leftc">Restaurant Details</td>
                  <td class="rightc">
                    <%= orders[i].restaurant_name %> , <%= orders[i].restaurant_address %>,
                    phone :<%= orders[i].restaurant_phone %>.
                  </td>
                </tr>
                <tr>
                  <td class="leftc">Customer Details</td>
                  <td class="rightc">
                    <%= orders[i].name %> , <%= orders[i].address %>, phone :<%= orders[i].phone %>.
                  </td>
                </tr>
                <tr>
                  <td class="leftc">Food Quantity</td>
                  <td class="rightc"><%= orders[i].totQunt %></td>
                </tr>
              </table>
            </div>
            <button class="cardbtn2 accept-btn" type="button">Accept</button>
            <!-- <button class="cardbtn" type="button">Decline</button> -->
          </div>
        </div>

        <% } %>

        <!-- <div>
          <div class="cards">
            <h2 class="cardtitle">Order-ID: 2135</h2>
            <div class="ordcontent">
              <table>
                <tr>
                  <td class="leftc">Restaurant Details</td>
                  <td class="rightc">
                    Hotel Le Meridiean , 762 Avinashi Road, Neelambur Village,
                    Coimbatore.
                  </td>
                </tr>
                <tr>
                  <td class="leftc">Customer Details</td>
                  <td class="rightc">
                    Harish shanmugam , M-52 Nehru Nagar, Kovai pudhur ,
                    Coimbatore.
                  </td>
                </tr>
                <tr>
                  <td class="leftc">Food Quantity</td>
                  <td class="rightc">8</td>
                </tr>
              </table>
            </div>
            <button class="cardbtn2" type="button">Accept</button>
            <button class="cardbtn" type="button">Decline</button>
          </div>
        </div>
      </div>
    </div> -->
    <% } %>

    <script src="/common/js/portis.js"></script>
    <script src="/common/js/web3.min.js"></script>
    <script src="/common/js/truffle-contract.js"></script>
    <script src="/common/js/jquery.cookie.js"></script>
    <script src="/common/js/d2g_util.js"></script>
    <script src="/deliveryPersonnel/js/orders_d.js"></script>

    <script>
      $(document).ready(_=>{
        $('#logout-btn').click(event=>{
          event.preventDefault()

          $.removeCookie('res_acc_add', { path: '/'})
          $.removeCookie('del_acc_add', { path: '/'})
          $.removeCookie('cus_acc_add', { path: '/'})

          window.location.href = '/'
        })
      })
    </script>

  </body>
</html>
